<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Portal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='themes/default.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='res/core.css') }}">
</head>
<body>
    <div class="intro-wrapper">
        <div class="intro-content">
            <img src="/static/res/logo_big.png" alt="Logo" class="logo">
            <h1>RAXDA SMART ACCESS</h1>
            <p class="tagline">Administrative portal for access control systems</p>
            <div class="loader"><div class="bar"></div></div>
            <p class="note">Firmware {{ version }}</p>
        </div>

        <div class="sponsor-grid">
            <div class="sponsor-item">
                <img src="/static/res/index/sponsor1.png" alt="Jhen">
                <div class="label">JHEN Security</div>
            </div>
            <div class="sponsor-item">
                <img src="/static/res/index/sponsor2.png" alt="unikom">
                <div class="label">IF-1</div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const noteLabel = document.querySelector('.note');
            const loadBar = document.querySelector('.bar');
            const nextUrl = "{{ url_for('login') }}";
            function performSecurityCheck() {
                if (navigator.webdriver) {
                    return false;
                }

                if (navigator.plugins.length === 0 || navigator.languages.length === 0) {
                    return false;
                }

                if (window.outerWidth === 0 || window.outerHeight === 0) {
                    return false;
                }

                return true;
            }
            const isSecure = performSecurityCheck();
            setTimeout(() => {
                if (!isSecure) {
                    loadBar.style.animation = 'none';
                    loadBar.style.width = '10%';
                    loadBar.style.background = 'var(--p-status-error-main)';

                    noteLabel.innerText = "FAILED CAPTCHA. PLEASE RELOAD";
                    noteLabel.style.color = 'var(--p-status-error-main)';
                } else {
                    setTimeout(() => {
                        window.location.href = nextUrl;
                    }, 2750);
                }
            }, 250);
        });
    </script>
</body>
</html>