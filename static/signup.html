<!DOCTYPE html>
<html>
<head>
    <title>Sign Up</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='res/core.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='themes/' ~ theme ~ '.css') }}">
    <script src="{{ url_for('static', filename='res/core.js') }}"></script>
</head>
<body class="flex-center">
    <div class="login-box">
        <h2>Register Account</h2>
        {% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}
        <form id="signupForm" method="POST">
            <div class="form-group">
                <input type="text" name="username" class="input" placeholder="Username" required>
            </div>
            <div class="form-group">
                <input type="email" name="email" class="input" placeholder="Organization Email" required>
            </div>
            <div class="form-group">
                <input type="password" name="password" class="input" placeholder="Password" required>
            </div>
            <input type="hidden" name="verify_now" id="verify_now" value="true">

            <div style="margin: 15px 0; font-size: 0.9em; text-align: left;">
                <input type="checkbox" id="eula_check" onchange="document.getElementById('regBtn').disabled = !this.checked">
                <label for="eula_check">I agree to the <a href="#" onclick="showEula('{{ url_for('static', filename='res/eula.txt') }}')">EULA</a></label>
            </div>

            <button type="button" id="regBtn" class="btn btn-primary btn-block" disabled onclick="showVerifyPopup()">Register</button>
        </form>
        <div class="login-footer">
            <p>Already have an account? <a href="/">Login</a></p>
        </div>
    </div>

    <div id="eulaModal" class="modal-wrapper">
        <div class="modal-content">
            <div class="modal-header"><h3>License Agreement</h3></div>
            <div class="modal-body">
                <div class="eula-text" id="eulaContent">Loading...</div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeEula()">Close</button>
            </div>
        </div>
    </div>

    <div id="verifyModal" class="modal-wrapper">
        <div class="modal-content">
            <div class="modal-header"><h3>Verification Required</h3></div>
            <div class="modal-body">
                <p>Would you like to verify your email now to unlock Level 1 features, or continue as a Guest?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="submitSignup('true')">Verify Now</button>
                <button class="btn btn-secondary" onclick="submitSignup('false')">Later (Guest)</button>
            </div>
        </div>
    </div>
</body>
</html>